<div class="container mt-5">
  <% if flash[:notice].present? %>
    <div class="alert alert-success alert-dismissible fade show" role="alert">
      <%= flash[:notice] %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% end %>

  <% if flash[:alert].present? %>
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
      <%= flash[:alert] %>
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  <% end %>

  <div class="row">
    <div class="col">
      <h2>Sign in</h2>

      <%= form_for(resource, as: resource_name, url: session_path(resource_name), data: { turbo: false }) do |f| %>
        <div class="mb-3">
          <%= f.label :email %>
          <%= f.email_field(
            :email,
            autocomplete: "email",
            autofocus: true,
            class: "form-control#{ resource.errors[:email].any? ? ' is-invalid' : nil}"
          ) %>

          <% if resource.errors[:email].present? %>
            <div class="invalid-feedback">
              Email <%= resource.errors[:email].first %>
            </div>
          <% end %>
        </div>

        <div class="mb-3">
          <%= f.label :password %>
          <%= f.password_field(
            :password,
            autocomplete: "new-password",
            class: "form-control#{ resource.errors[:password].any? ? ' is-invalid' : nil}"
          ) %>

          <% if resource.errors[:password].present? %>
            <div class="invalid-feedback">
              Password <%= resource.errors[:password].first %>
            </div>
          <% end %>
        </div>

        <% if devise_mapping.rememberable? %>
          <div class="mb-3">
            <%= f.check_box(
              :remember_me,
              class: "form-check-input"
            ) %>
            <%= f.label(
              :remember_me,
              class: "form-check-label"
            ) %>
          </div>
        <% end %>

        <div class="mb-3">
          <%= f.submit(
            "Sign in",
            class: "btn btn-success",
          ) %>
        </div>
      <% end %>

      <%= render "devise/shared/links" %>
    </div>

    <div class="col d-none d-md-block">
      <div class="card">
        <div class="card-body">
          <h5 class="card-title">Haven't got an account?</h5>
          <p class="card-text">
            That's okay! It takes a few quick minutes to sign up and join Nomadstation.
            <br />
            <br />
            <%= render partial: "shared/joining_reasons" %>
          </p>
          <%= link_to(
            "Join now!",
            new_user_registration_path,
            class: "btn btn-success btn-lg"
          ) %>
        </div>
      </div>
    </div>
  </div>
</div>
